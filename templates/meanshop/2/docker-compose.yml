version: '2'
services:
  meanshop-nginx:
    image: thalhalla/meanshop:nginx
    labels:
      io.rancher.scheduler.affinity:host_label: ${host_label}
      io.rancher.container.hostname_override: container_name
      io.rancher.container.pull_image: always
      traefik.enable: true
      traefik.alias: ${MEANSHOP_HOST}
      traefik.domain: ${MEANSHOP_DOMAIN}
      traefik.acme: true
      traefik.port: 80
  meanshop-node:
    image: thalhalla/meanshop:node
    labels:
      io.rancher.scheduler.affinity:host_label: ${host_label}
      io.rancher.container.pull_image: always
    environment:
      - PORT=7000
      - MONGODB_DB_URL="mongodb://meango/meanshop"
      - MEANGO_PORT_27017_TCP_ADDR=${MEANGO_PORT_27017_TCP_ADDR}
